<div class="home-container">

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">Vive momentos <span class="gradient-text">inolvidables</span></h1>
      <p class="hero-subtitle">Descubre y asegura tu lugar en los mejores conciertos, festivales y eventos culturales.
      </p>

      <div class="hero-search-container">
        <span class="material-icons search-icon">search</span>
        <input type="text" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()"
          placeholder="Buscar eventos, conciertos..." class="hero-search-input" />
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="content-wrapper">

    <!-- Categories Carousel (Recreated with Ionic Icons) -->
    <section class="categories-section">
      <div class="section-header">
        <h2>Categor√≠as</h2>
        <div class="carousel-nav">
          <button class="nav-btn prev" (click)="scrollLeft()">
            <span class="material-icons">chevron_left</span>
          </button>
          <button class="nav-btn next" (click)="scrollRight()">
            <span class="material-icons">chevron_right</span>
          </button>
        </div>
      </div>

      <div class="cat-carousel-container">
        <div class="cat-track" #carouselTrack>
          <!-- 'All' Card -->
          <div class="cat-card" [class.active]="categoriaFiltro === null" (click)="setCategoria(null)">
            <div class="icon-contain">
              <ion-icon name="apps"></ion-icon>
            </div>
            <span>Todo</span>
          </div>

          <!-- Dynamic Categories -->
          <div *ngFor="let cat of categorias" class="cat-card" [class.active]="categoriaFiltro === cat.id"
            (click)="setCategoria(cat.id)">

            <div class="icon-contain">
              <ion-icon [name]="getCategoryIcon(cat)"></ion-icon>
            </div>
            <span>{{ cat.nombre.trim() }}</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state" style="text-align: center; padding: 3rem;">
      <div class="spinner" style="margin-bottom: 1rem;"></div>
      <p>Cargando experiencias...</p>
    </div>

    <!-- Featured Events -->
    <section class="events-section" *ngIf="!loading && !searchTerm && !categoriaFiltro && eventosDestacados.length > 0">
      <div class="section-header">
        <h2>Destacados üî•</h2>
      </div>

      <div class="events-grid featured">
        <article *ngFor="let evento of eventosDestacados" class="event-card featured-card"
          [routerLink]="['/detalle-evento', evento.id]">
          <div class="card-image">
            <img [src]="getImageUrl(evento)" [alt]="evento.titulo" loading="lazy" />
          </div>
          <div class="card-content">
            <p class="location"><span class="material-icons" style="font-size: 1rem">place</span> {{ evento.lugar?.nombre ||
              'Ubicaci√≥n' }}</p>
            <h3>{{ evento.titulo }}</h3>
            <div class="price-action">
              <span class="price">{{ formatCurrency(evento.precio_minimo) }}</span>
              <button class="btn-icon">
                <span class="material-icons">arrow_forward</span>
              </button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- Regular Events -->
    <section class="events-section" *ngIf="!loading">
      <div class="section-header">
        <h2>{{ categoriaFiltro ? 'Resultados' : 'Pr√≥ximos Eventos' }}</h2>
      </div>

      <div class="events-grid">
        <article *ngFor="let evento of eventosRegulares" class="event-card"
          [routerLink]="['/detalle-evento', evento.id]">
          <div class="card-image">
            <img [src]="getImageUrl(evento)" [alt]="evento.titulo" loading="lazy" />
          </div>
          <div class="card-content">
            <div class="location-date">
              <p class="location"><span class="material-icons" style="font-size: 1rem">place</span> {{ evento.lugar?.nombre || 'Ubicaci√≥n' }}</p>
              <p class="date"><span class="material-icons" style="font-size: 1rem">calendar_today</span> {{
                evento.fecha_inicio | dateFormat:'shortDate' }}</p>
            </div>
            <h3>{{ evento.titulo }}</h3>
            <div class="price-action">
              <span class="price">{{ formatCurrency(evento.precio_minimo) }}</span>
              <button class="btn-icon">
                <span class="material-icons">add</span>
              </button>
            </div>
          </div>
        </article>

        <!-- Empty State -->
        <div *ngIf="eventosRegulares.length === 0" class="empty-state" style="grid-column: 1/-1;">
          <div class="empty-icon-wrapper">
            <span class="material-icons empty-icon">event_busy</span>
          </div>
          <h3 class="empty-title">No se encontraron eventos</h3>
          <p class="empty-subtitle">Prueba ajustando tus filtros de b√∫squeda.</p>
          <button class="btn-view-all" (click)="setCategoria(null); searchTerm = '';">Ver todos</button>
        </div>
      </div>
    </section>

  </div>

  <!-- Secci√≥n de Seguridad Wompi -->
  <section class="wompi-security-main">
    <div class="wompi-container">
      <div class="wompi-header">
        <span class="material-icons wompi-icon">security</span>
        <h2 class="wompi-title">Pagos Seguros con Wompi</h2>
        <p class="wompi-subtitle">Tu tranquilidad es nuestra prioridad. Conoce por qu√© es seguro comprar con Wompi</p>
      </div>

      <div class="wompi-features-grid">
        <div class="wompi-feature-card">
          <div class="wompi-feature-icon">
            <span class="material-icons">lock</span>
          </div>
          <h3>Encriptaci√≥n SSL/TLS</h3>
          <p>Todas las transacciones est√°n protegidas con encriptaci√≥n de nivel bancario. Tus datos nunca se almacenan en nuestros servidores.</p>
        </div>

        <div class="wompi-feature-card">
          <div class="wompi-feature-icon">
            <span class="material-icons">verified_user</span>
          </div>
          <h3>Certificaci√≥n PCI DSS</h3>
          <p>Wompi cumple con los m√°s altos est√°ndares de seguridad internacionales (PCI DSS Level 1) para el procesamiento de pagos.</p>
        </div>

        <div class="wompi-feature-card">
          <div class="wompi-feature-icon">
            <span class="material-icons">shield</span>
          </div>
          <h3>Protecci√≥n contra fraude</h3>
          <p>Sistema avanzado de detecci√≥n de fraude con inteligencia artificial que protege cada transacci√≥n en tiempo real.</p>
        </div>

        <div class="wompi-feature-card">
          <div class="wompi-feature-icon">
            <span class="material-icons">account_balance</span>
          </div>
          <h3>Regulaci√≥n financiera</h3>
          <p>Wompi est√° regulado y supervisado por las autoridades financieras colombianas, garantizando transparencia y seguridad.</p>
        </div>

        <div class="wompi-feature-card">
          <div class="wompi-feature-icon">
            <span class="material-icons">vpn_key</span>
          </div>
          <h3>Tokenizaci√≥n de datos</h3>
          <p>Los datos de tu tarjeta se tokenizan, lo que significa que nunca se comparten directamente, solo se usan tokens seguros.</p>
        </div>

        <div class="wompi-feature-card">
          <div class="wompi-feature-icon">
            <span class="material-icons">history</span>
          </div>
          <h3>Historial completo</h3>
          <p>Cada transacci√≥n queda registrada y puedes consultar tu historial completo en cualquier momento desde tu cuenta.</p>
        </div>
      </div>

      <div class="wompi-note">
        <span class="material-icons">info</span>
        <div>
          <strong>Millones de transacciones seguras</strong>
          <p>Wompi procesa millones de transacciones mensuales en Colombia con los m√°s altos est√°ndares de seguridad. Tus pagos est√°n protegidos con la misma tecnolog√≠a que usan los bancos m√°s grandes del pa√≠s.</p>
        </div>
      </div>

      <div class="wompi-footer-links">
        <a href="https://wompi.co" target="_blank" rel="noopener noreferrer" class="wompi-link">
          <span class="material-icons">open_in_new</span>
          <span>Conoce m√°s sobre Wompi</span>
        </a>
        <div class="security-badges">
          <div class="security-badge">
            <span class="material-icons">verified</span>
            <span>Compra Segura</span>
          </div>
          <div class="security-badge">
            <span class="material-icons">lock</span>
            <span>SSL Encriptado</span>
          </div>
          <div class="security-badge">
            <span class="material-icons">shield</span>
            <span>PCI DSS</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <!-- Secci√≥n de la plataforma -->
      <div class="footer-section">
        <div class="footer-logo">
          <img src="/logo-eventum-horizontal.svg" alt="Eventum" class="footer-logo-img" />
        </div>
        <p class="footer-description">
          <strong>Tu plataforma integral para eventos.</strong> Eventum conecta a organizadores y asistentes
          en un ecosistema completo de gesti√≥n de eventos. Descubre experiencias inolvidables, adquiere
          boletas digitales de forma segura con c√≥digos QR √∫nicos, y disfruta de un proceso de compra
          r√°pido y confiable con integraci√≥n de pagos Wompi.
        </p>
        <p class="footer-description">
          <strong>¬øEres organizador?</strong> Lleva tus eventos al siguiente nivel con nuestras herramientas
          profesionales: crea y gestiona eventos, configura m√∫ltiples tipos de boletas, controla inventarios
          en tiempo real, accede a dashboards con m√©tricas detalladas, genera reportes de ventas y asistencia,
          y administra tus ingresos con total transparencia. Todo desde una plataforma moderna y f√°cil de usar.
        </p>
        <div class="footer-features">
          <div class="feature-item">
            <span class="material-icons">verified</span>
            <span>Compra Segura</span>
          </div>
          <div class="feature-item">
            <span class="material-icons">qr_code</span>
            <span>Boletas Digitales</span>
          </div>
          <div class="feature-item">
            <span class="material-icons">support_agent</span>
            <span>Soporte 24/7</span>
          </div>
          <div class="feature-item">
            <span class="material-icons">analytics</span>
            <span>Reportes en Tiempo Real</span>
          </div>
          <div class="feature-item">
            <span class="material-icons">event</span>
            <span>Gesti√≥n Completa</span>
          </div>
          <div class="feature-item">
            <span class="material-icons">payments</span>
            <span>Pagos Wompi</span>
          </div>
        </div>
      </div>

      <!-- Secci√≥n de contacto -->
      <div class="footer-section">
        <h4>Desarrollado por</h4>
        <div class="developer-card">
          <div class="developer-header">
            <span class="material-icons dev-icon">code</span>
            <div>
              <h5>Baria Dev</h5>
              <p class="dev-subtitle">Soluciones Tecnol√≥gicas</p>
            </div>
          </div>
          <div class="contact-methods">
            <a href="https://wa.me/573178954373" target="_blank" rel="noopener noreferrer" class="contact-btn whatsapp">
              <span class="material-icons">chat</span>
              <div class="contact-info">
                <span class="contact-label">WhatsApp</span>
                <span class="contact-value">317 895 4373</span>
              </div>
            </a>
            <a href="tel:+573178954373" class="contact-btn phone">
              <span class="material-icons">phone</span>
              <div class="contact-info">
                <span class="contact-label">Llamar</span>
                <span class="contact-value">317 895 4373</span>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Copyright -->
    <div class="footer-bottom">
      <p>&copy; {{ currentYear }} Eventum. Todos los derechos reservados.</p>
      <div class="footer-links">
        <a href="#" class="footer-link">T√©rminos y Condiciones</a>
        <span class="separator">‚Ä¢</span>
        <a href="#" class="footer-link">Pol√≠tica de Privacidad</a>
        <span class="separator">‚Ä¢</span>
        <a href="#" class="footer-link">Ayuda</a>
      </div>
    </div>
  </footer>
</div>